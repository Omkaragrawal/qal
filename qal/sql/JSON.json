{
  "definitions": {
    "Array_ParameterOrderByItem": {
      "minItems": 0,
      "uniqueItems": true,
      "type": "array",
      "items": {
        "$ref": "#/definitions/ParameterOrderByItem"
      }
    },
    "ParameterExpression": {
      "type": "object",
      "properties": {
        "operator": {
          "type": "string"
        },
        "expressionitems": {
          "$ref": "#/definitions/Array_expression_item"
        },
        "row_separator": {
          "type": "string"
        }
      }
    },
    "Array_ParameterCondition": {
      "minItems": 0,
      "uniqueItems": true,
      "type": "array",
      "items": {
        "$ref": "#/definitions/ParameterCondition"
      }
    },
    "Array_Statement": {
      "minItems": 0,
      "uniqueItems": true,
      "type": "array",
      "items": {
        "$ref": "#/definitions/statement"
      }
    },
    "Array_ParameterConstraint": {
      "minItems": 0,
      "uniqueItems": true,
      "type": "array",
      "items": {
        "$ref": "#/definitions/ParameterConstraint"
      }
    },
    "ParameterCase": {
      "type": "object",
      "properties": {
        "operator": {
          "type": "string"
        },
        "when_statements": {
          "$ref": "#/definitions/Array_ParameterWhen"
        },
        "else_statement": {
          "$ref": "#/definitions/Array_expression_item"
        },
        "row_separator": {
          "type": "string"
        }
      }
    },
    "VerbCreateIndex": {
      "type": "object",
      "properties": {
        "index_type": {
          "$ref": "#/definitions/index_types"
        },
        "name": {
          "type": "string"
        },
        "tablename": {
          "type": "string"
        },
        "row_separator": {
          "type": "string"
        },
        "columnnames": {
          "$ref": "#/definitions/Array_string"
        }
      }
    },
    "set_operator": {
      "enum": [
        "UNION",
        "INTERSECT",
        "DIFFERENCE"
      ],
      "type": "string"
    },
    "statement": {
      "type": "object",
      "oneOf": [
        {
          "$ref": "#/definitions/VerbCreateTable"
        },
        {
          "$ref": "#/definitions/VerbCreateIndex"
        },
        {
          "$ref": "#/definitions/VerbSelect"
        },
        {
          "$ref": "#/definitions/VerbCustom"
        },
        {
          "$ref": "#/definitions/VerbInsert"
        }
      ]
    },
    "VerbDropTable": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "row_separator": {
          "type": "string"
        }
      }
    },
    "ParameterCast": {
      "type": "object",
      "properties": {
        "operator": {
          "type": "string"
        },
        "expression": {
          "$ref": "#/definitions/Array_expression_item"
        },
        "datatype": {
          "$ref": "#/definitions/datatypes"
        },
        "row_separator": {
          "type": "string"
        }
      }
    },
    "ParameterFunction": {
      "type": "object",
      "properties": {
        "operator": {
          "type": "string"
        },
        "parameters": {
          "$ref": "#/definitions/Array_expression_item"
        },
        "name": {
          "type": "string"
        },
        "row_separator": {
          "type": "string"
        }
      }
    },
    "ParameterIn": {
      "type": "object",
      "properties": {
        "operator": {
          "type": "string"
        },
        "row_separator": {
          "type": "string"
        },
        "in_values": {
          "$ref": "#/definitions/in_types"
        }
      }
    },
    "ParameterField": {
      "type": "object",
      "properties": {
        "expression": {
          "$ref": "#/definitions/Array_expression_item"
        },
        "row_separator": {
          "type": "string"
        },
        "alias": {
          "type": "string"
        }
      }
    },
    "Array_list": {
      "minItems": 0,
      "uniqueItems": true,
      "type": "array",
      "items": {
        "$ref": "*"
      }
    },
    "Array_ParameterSource": {
      "minItems": 0,
      "uniqueItems": true,
      "type": "array",
      "items": {
        "$ref": "#/definitions/ParameterSource"
      }
    },
    "ParameterColumndefinition": {
      "type": "object",
      "properties": {
        "notnull": {
          "type": "boolean"
        },
        "default": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "datatype": {
          "$ref": "#/definitions/datatypes"
        },
        "row_separator": {
          "type": "string"
        }
      }
    },
    "and_or": {
      "enum": [
        "AND",
        "OR"
      ],
      "type": "string"
    },
    "constraint_types": {
      "enum": [
        "NOT NULL",
        "UNIQUE",
        "PRIMARY KEY",
        "FOREIGN KEY",
        "CHECK",
        "DEFAULT"
      ],
      "type": "string"
    },
    "VerbDelete": {
      "type": "object",
      "properties": {
        "sources": {
          "$ref": "#/definitions/Array_ParameterSource"
        },
        "row_separator": {
          "type": "string"
        }
      }
    },
    "ParameterConditions": {
      "type": "object",
      "properties": {}
    },
    "Array_ParameterAssignment": {
      "minItems": 0,
      "uniqueItems": true,
      "type": "array",
      "items": {
        "$ref": "#/definitions/ParameterAssignment"
      }
    },
    "VerbSelect": {
      "type": "object",
      "properties": {
        "order_by": {
          "$ref": "#/definitions/Array_ParameterOrderByItem"
        },
        "operator": {
          "type": "string"
        },
        "sources": {
          "$ref": "#/definitions/Array_ParameterSource"
        },
        "top_limit": {
          "type": "integer"
        },
        "fields": {
          "$ref": "#/definitions/Array_ParameterField"
        },
        "resource_uuid": {
          "type": "string"
        },
        "row_separator": {
          "type": "string"
        }
      }
    },
    "ParameterConstraint": {
      "type": "object",
      "properties": {
        "constraint_type": {
          "$ref": "#/definitions/constraint_types"
        },
        "references": {
          "$ref": "#/definitions/Array_ParameterIdentifier"
        },
        "name": {
          "type": "string"
        },
        "checkconditions": {
          "$ref": "#/definitions/Array_ParameterCondition"
        },
        "row_separator": {
          "type": "string"
        }
      }
    },
    "Array_tabular_expression_item": {
      "minItems": 0,
      "uniqueItems": true,
      "type": "array",
      "items": {
        "type": "object",
        "oneOf": [
          {
            "$ref": {
              "$ref": "#/definitions/VerbSelect"
            }
          },
          {
            "$ref": {
              "$ref": "#/definitions/ParameterDataset"
            }
          },
          {
            "$ref": {
              "$ref": "#/definitions/ParameterSet"
            }
          }
        ]
      }
    },
    "ParameterSet": {
      "type": "object",
      "properties": {
        "subsets": {
          "$ref": "#/definitions/Array_tabular_expression_item"
        },
        "set_operator": {
          "$ref": "#/definitions/set_operator"
        },
        "row_separator": {
          "type": "string"
        }
      }
    },
    "ParameterRemotable": {
      "type": "object",
      "properties": {
        "resource_uuid": {
          "type": "string"
        }
      }
    },
    "Array_ParameterColumndefinition": {
      "minItems": 0,
      "uniqueItems": true,
      "type": "array",
      "items": {
        "$ref": "#/definitions/ParameterColumndefinition"
      }
    },
    "tabular_expression_item": {
      "type": "object",
      "oneOf": [
        {
          "$ref": "#/definitions/VerbSelect"
        },
        {
          "$ref": "#/definitions/ParameterDataset"
        },
        {
          "$ref": "#/definitions/ParameterSet"
        }
      ]
    },
    "ParameterIdentifier": {
      "type": "object",
      "properties": {
        "operator": {
          "type": "string"
        },
        "prefix": {
          "type": "string"
        },
        "identifier": {
          "type": "string"
        },
        "row_separator": {
          "type": "string"
        }
      }
    },
    "ParameterString": {
      "type": "object",
      "properties": {
        "escape_character": {
          "type": "string"
        },
        "operator": {
          "type": "string"
        },
        "string_value": {
          "type": "string"
        },
        "row_separator": {
          "type": "string"
        }
      }
    },
    "ParameterBase": {
      "type": "object",
      "properties": {
        "row_separator": {
          "type": "string"
        }
      }
    },
    "ParameterOrderByItem": {
      "type": "object",
      "properties": {
        "operator": {
          "type": "string"
        },
        "expressionitems": {
          "$ref": "#/definitions/Array_expression_item"
        },
        "direction": {
          "type": "string"
        },
        "row_separator": {
          "type": "string"
        }
      }
    },
    "ParameterSource": {
      "type": "object",
      "properties": {
        "join_type": {
          "$ref": "#/definitions/join_type"
        },
        "expression": {
          "$ref": "#/definitions/Array_expression_item"
        },
        "conditions": {
          "$ref": "#/definitions/Array_ParameterCondition"
        },
        "row_separator": {
          "type": "string"
        },
        "resource_uuid": {
          "type": "string"
        },
        "alias": {
          "type": "string"
        }
      }
    },
    "ParameterParameter": {
      "type": "object",
      "properties": {
        "operator": {
          "type": "string"
        },
        "datatype": {
          "$ref": "#/definitions/datatypes"
        },
        "row_separator": {
          "type": "string"
        }
      }
    },
    "Array_ParameterIdentifier": {
      "minItems": 0,
      "uniqueItems": true,
      "type": "array",
      "items": {
        "$ref": "#/definitions/ParameterIdentifier"
      }
    },
    "Array_ParameterWhen": {
      "minItems": 0,
      "uniqueItems": true,
      "type": "array",
      "items": {
        "$ref": "#/definitions/ParameterWhen"
      }
    },
    "data_source": {
      "enum": [
        "FlatfileDataset",
        "XpathDataset",
        "MatrixDataset"
      ],
      "type": "string"
    },
    "Array_expression_item": {
      "minItems": 0,
      "uniqueItems": true,
      "type": "array",
      "items": {
        "type": "object",
        "oneOf": [
          {
            "$ref": {
              "$ref": "#/definitions/VerbSelect"
            }
          },
          {
            "$ref": {
              "$ref": "#/definitions/ParameterExpression"
            }
          },
          {
            "$ref": {
              "$ref": "#/definitions/ParameterString"
            }
          },
          {
            "$ref": {
              "$ref": "#/definitions/ParameterNumeric"
            }
          },
          {
            "$ref": {
              "$ref": "#/definitions/ParameterIdentifier"
            }
          },
          {
            "$ref": {
              "$ref": "#/definitions/ParameterCast"
            }
          },
          {
            "$ref": {
              "$ref": "#/definitions/ParameterFunction"
            }
          },
          {
            "$ref": {
              "$ref": "#/definitions/ParameterIn"
            }
          },
          {
            "$ref": {
              "$ref": "#/definitions/ParameterDataset"
            }
          },
          {
            "$ref": {
              "$ref": "#/definitions/ParameterCase"
            }
          },
          {
            "$ref": {
              "$ref": "#/definitions/ParameterSet"
            }
          }
        ]
      }
    },
    "condition_part": {
      "type": "object",
      "oneOf": [
        {
          "$ref": "#/definitions/ParameterConditions"
        },
        {
          "$ref": "#/definitions/ParameterCondition"
        },
        {
          "$ref": "#/definitions/ParameterExpression"
        },
        {
          "$ref": "#/definitions/VerbSelect"
        },
        {
          "$ref": "#/definitions/ParameterExpression"
        },
        {
          "$ref": "#/definitions/ParameterString"
        },
        {
          "$ref": "#/definitions/ParameterNumeric"
        },
        {
          "$ref": "#/definitions/ParameterIdentifier"
        },
        {
          "$ref": "#/definitions/ParameterCast"
        },
        {
          "$ref": "#/definitions/ParameterFunction"
        },
        {
          "$ref": "#/definitions/ParameterIn"
        },
        {
          "$ref": "#/definitions/ParameterDataset"
        },
        {
          "$ref": "#/definitions/ParameterCase"
        },
        {
          "$ref": "#/definitions/ParameterSet"
        }
      ]
    },
    "VerbUpdate": {
      "type": "object",
      "properties": {
        "table_identifier": {
          "$ref": "#/definitions/ParameterIdentifier"
        },
        "conditions": {
          "$ref": "#/definitions/Array_ParameterCondition"
        },
        "assignments": {
          "$ref": "#/definitions/Array_ParameterAssignment"
        },
        "row_separator": {
          "type": "string"
        }
      }
    },
    "VerbCustom": {
      "type": "object",
      "properties": {
        "sql_oracle": {
          "type": "string"
        },
        "sql_sqlserver": {
          "type": "string"
        },
        "sql_mysql": {
          "type": "string"
        },
        "sql_postgresql": {
          "type": "string"
        },
        "sql_db2": {
          "type": "string"
        },
        "row_separator": {
          "type": "string"
        }
      }
    },
    "datatypes": {
      "type": "string",
      "pattern": "(integer|string|string(\\(.*\\))|serial|timestamp)"
    },
    "ParameterDataset": {
      "type": "object",
      "properties": {
        "operator": {
          "type": "string"
        },
        "row_separator": {
          "type": "string"
        },
        "resource_uuid": {
          "type": "string"
        },
        "data_source": {
          "$ref": "#/definitions/data_source_types"
        }
      }
    },
    "index_types": {
      "enum": [
        "UNIQUE",
        "CLUSTERED",
        "NONCLUSTERED"
      ],
      "type": "string"
    },
    "ParameterAssignment": {
      "type": "object",
      "properties": {
        "right": {
          "$ref": "#/definitions/condition_part"
        },
        "row_separator": {
          "type": "string"
        },
        "left": {
          "$ref": "#/definitions/condition_part"
        }
      }
    },
    "ParameterCondition": {
      "type": "object",
      "properties": {
        "operator": {
          "type": "string"
        },
        "right": {
          "$ref": "#/definitions/condition_part"
        },
        "and_or": {
          "$ref": "#/definitions/and_or"
        },
        "left": {
          "$ref": "#/definitions/condition_part"
        },
        "row_separator": {
          "type": "string"
        }
      }
    },
    "Array_ParameterField": {
      "minItems": 0,
      "uniqueItems": true,
      "type": "array",
      "items": {
        "$ref": "#/definitions/ParameterField"
      }
    },
    "db_types": {
      "enum": [
        "MySQL",
        "PostgreSQL",
        "Oracle",
        "DB2",
        "SQLserver"
      ],
      "type": "string"
    },
    "ParameterExpressionItem": {
      "type": "object",
      "properties": {
        "operator": {
          "type": "string"
        },
        "row_separator": {
          "type": "string"
        }
      }
    },
    "csv_dialects": {
      "enum": [
        "excel-tab",
        "unix",
        "excel"
      ],
      "type": "string"
    },
    "ParameterDDL": {
      "type": "object",
      "properties": {
        "row_separator": {
          "type": "string"
        }
      }
    },
    "VerbInsert": {
      "type": "object",
      "properties": {
        "column_identifiers": {
          "$ref": "#/definitions/Array_ParameterIdentifier"
        },
        "destination_identifier": {
          "$ref": "#/definitions/ParameterIdentifier"
        },
        "row_separator": {
          "type": "string"
        },
        "data": {
          "$ref": "#/definitions/tabular_expression_item"
        }
      }
    },
    "VerbCreateTable": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "constraints": {
          "$ref": "#/definitions/Array_ParameterConstraint"
        },
        "columns": {
          "$ref": "#/definitions/Array_ParameterColumndefinition"
        },
        "row_separator": {
          "type": "string"
        }
      }
    },
    "ParameterWhen": {
      "type": "object",
      "properties": {
        "result": {
          "$ref": "#/definitions/Array_expression_item"
        },
        "row_separator": {
          "type": "string"
        },
        "conditions": {
          "$ref": "#/definitions/Array_ParameterCondition"
        }
      }
    },
    "Array_ParameterString": {
      "minItems": 0,
      "uniqueItems": true,
      "type": "array",
      "items": {
        "$ref": "#/definitions/ParameterString"
      }
    },
    "ParameterNumeric": {
      "type": "object",
      "properties": {
        "operator": {
          "type": "string"
        },
        "row_separator": {
          "type": "string"
        },
        "numeric_value": {
          "type": "number"
        }
      }
    }
  },
  "type": "object",
  "required": [
    "statement"
  ],
  "$schema": "http://json-schema.org/draft-04/schema#",
  "version": "0.5",
  "properties": {
    "statement": {
      "$ref": "#/definitions/statement"
    }
  },
  "description": "QAL SQL Schema",
  "title": "Message"
}