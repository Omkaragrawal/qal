{"version": "0.5", "description": "QAL SQL Schema", "properties": {"statement": {"$ref": "#/definitions/statement"}}, "title": "Message", "$schema": "http://json-schema.org/draft-04/schema#", "type": "object", "definitions": {"tabular_expression_item": {"type": "object", "oneOf": [{"$ref": "#/definitions/VerbSelect"}, {"$ref": "#/definitions/ParameterDataset"}, {"$ref": "#/definitions/ParameterSet"}]}, "ParameterBase": {"type": "object", "properties": {"row_separator": {"type": "string"}}}, "Array_ParameterColumndefinition": {"type": "array", "minItems": 0, "items": {"$ref": "#/definitions/ParameterColumndefinition"}, "uniqueItems": true}, "ParameterString": {"type": "object", "properties": {"escape_character": {"type": "string"}, "operator": {"type": "string"}, "string_value": {"type": "string"}, "row_separator": {"type": "string"}}}, "ParameterCast": {"type": "object", "properties": {"expression": {"$ref": "#/definitions/Array_expression_item"}, "operator": {"type": "string"}, "row_separator": {"type": "string"}, "datatype": {"$ref": "#/definitions/datatypes"}}}, "condition_part": {"type": "object", "oneOf": [{"$ref": "#/definitions/ParameterConditions"}, {"$ref": "#/definitions/ParameterCondition"}, {"$ref": "#/definitions/ParameterExpression"}, {"$ref": "#/definitions/VerbSelect"}, {"$ref": "#/definitions/ParameterExpression"}, {"$ref": "#/definitions/ParameterString"}, {"$ref": "#/definitions/ParameterNumeric"}, {"$ref": "#/definitions/ParameterIdentifier"}, {"$ref": "#/definitions/ParameterCast"}, {"$ref": "#/definitions/ParameterFunction"}, {"$ref": "#/definitions/ParameterIn"}, {"$ref": "#/definitions/ParameterDataset"}, {"$ref": "#/definitions/ParameterCase"}, {"$ref": "#/definitions/ParameterSet"}]}, "db_types": {"type": "string", "enum": ["MySQL", "PostgreSQL", "Oracle", "DB2", "SQLserver"]}, "Array_ParameterAssignment": {"type": "array", "minItems": 0, "items": {"$ref": "#/definitions/ParameterAssignment"}, "uniqueItems": true}, "Array_ParameterSource": {"type": "array", "minItems": 0, "items": {"$ref": "#/definitions/ParameterSource"}, "uniqueItems": true}, "ParameterExpressionItem": {"type": "object", "properties": {"operator": {"type": "string"}, "row_separator": {"type": "string"}}}, "ParameterCase": {"type": "object", "properties": {"when_statements": {"$ref": "#/definitions/Array_ParameterWhen"}, "operator": {"type": "string"}, "else_statement": {"$ref": "#/definitions/Array_expression_item"}, "row_separator": {"type": "string"}}}, "ParameterColumndefinition": {"type": "object", "properties": {"name": {"type": "string"}, "notnull": {"type": "boolean"}, "row_separator": {"type": "string"}, "default": {"type": "string"}, "datatype": {"$ref": "#/definitions/datatypes"}}}, "ParameterWhen": {"type": "object", "properties": {"conditions": {"$ref": "#/definitions/Array_ParameterCondition"}, "row_separator": {"type": "string"}, "result": {"$ref": "#/definitions/Array_expression_item"}}}, "ParameterIn": {"type": "object", "properties": {"in_values": {"$ref": "#/definitions/in_types"}, "operator": {"type": "string"}, "row_separator": {"type": "string"}}}, "VerbUpdate": {"type": "object", "properties": {"assignments": {"$ref": "#/definitions/Array_ParameterAssignment"}, "conditions": {"$ref": "#/definitions/Array_ParameterCondition"}, "row_separator": {"type": "string"}, "table_identifier": {"$ref": "#/definitions/ParameterIdentifier"}}}, "VerbDelete": {"type": "object", "properties": {"row_separator": {"type": "string"}, "sources": {"$ref": "#/definitions/Array_ParameterSource"}}}, "and_or": {"type": "string", "enum": ["AND", "OR"]}, "Array_ParameterString": {"type": "array", "minItems": 0, "items": {"$ref": "#/definitions/ParameterString"}, "uniqueItems": true}, "ParameterDDL": {"type": "object", "properties": {"row_separator": {"type": "string"}}}, "ParameterFunction": {"type": "object", "properties": {"name": {"type": "string"}, "row_separator": {"type": "string"}, "operator": {"type": "string"}, "parameters": {"type": "string"}}}, "Array_list": {"type": "array", "minItems": 0, "items": {"$ref": "*"}, "uniqueItems": true}, "ParameterSet": {"type": "object", "properties": {"subsets": {"$ref": "#/definitions/Array_tabular_expression_item"}, "row_separator": {"type": "string"}, "set_operator": {"$ref": "#/definitions/set_operator"}}}, "ParameterExpression": {"type": "object", "properties": {"operator": {"type": "string"}, "row_separator": {"type": "string"}, "expressionitems": {"$ref": "#/definitions/Array_expression_item"}}}, "VerbCustom": {"type": "object", "properties": {"sql_oracle": {"type": "string"}, "sql_sqlserver": {"type": "string"}, "sql_db2": {"type": "string"}, "sql_mysql": {"type": "string"}, "row_separator": {"type": "string"}, "sql_postgresql": {"type": "string"}}}, "ParameterParameter": {"type": "object", "properties": {"operator": {"type": "string"}, "row_separator": {"type": "string"}, "datatype": {"$ref": "#/definitions/datatypes"}}}, "ParameterAssignment": {"type": "object", "properties": {"right": {"$ref": "#/definitions/condition_part"}, "left": {"$ref": "#/definitions/condition_part"}, "row_separator": {"type": "string"}}}, "Array_ParameterField": {"type": "array", "minItems": 0, "items": {"$ref": "#/definitions/ParameterField"}, "uniqueItems": true}, "constraint_types": {"type": "string", "enum": ["NOT NULL", "UNIQUE", "PRIMARY KEY", "FOREIGN KEY", "CHECK", "DEFAULT"]}, "datatypes": {"type": "string", "pattern": "(integer|string|string(\\(.*\\))|serial|timestamp)"}, "csv_dialects": {"type": "string", "enum": ["excel-tab", "unix", "excel"]}, "ParameterRemotable": {"type": "object", "properties": {"resource_uuid": {"type": "string"}}}, "VerbSelect": {"type": "object", "properties": {"order_by": {"$ref": "#/definitions/Array_ParameterOrderByItem"}, "operator": {"type": "string"}, "resource_uuid": {"type": "string"}, "top_limit": {"type": "integer"}, "row_separator": {"type": "string"}, "fields": {"$ref": "#/definitions/Array_ParameterField"}, "sources": {"$ref": "#/definitions/Array_ParameterSource"}}}, "Array_ParameterOrderByItem": {"type": "array", "minItems": 0, "items": {"$ref": "#/definitions/ParameterOrderByItem"}, "uniqueItems": true}, "Array_ParameterIdentifier": {"type": "array", "minItems": 0, "items": {"$ref": "#/definitions/ParameterIdentifier"}, "uniqueItems": true}, "VerbCreateTable": {"type": "object", "properties": {"name": {"type": "string"}, "row_separator": {"type": "string"}, "constraints": {"$ref": "#/definitions/Array_ParameterConstraint"}, "columns": {"$ref": "#/definitions/Array_ParameterColumndefinition"}}}, "set_operator": {"type": "string", "enum": ["UNION", "INTERSECT", "DIFFERENCE"]}, "ParameterIdentifier": {"type": "object", "properties": {"prefix": {"type": "string"}, "operator": {"type": "string"}, "row_separator": {"type": "string"}, "identifier": {"type": "string"}}}, "ParameterCondition": {"type": "object", "properties": {"right": {"$ref": "#/definitions/condition_part"}, "and_or": {"$ref": "#/definitions/and_or"}, "left": {"$ref": "#/definitions/condition_part"}, "operator": {"type": "string"}, "row_separator": {"type": "string"}}}, "statement": {"type": "object", "oneOf": [{"$ref": "#/definitions/VerbCreateTable"}, {"$ref": "#/definitions/VerbCreateIndex"}, {"$ref": "#/definitions/VerbSelect"}, {"$ref": "#/definitions/VerbCustom"}, {"$ref": "#/definitions/VerbInsert"}]}, "ParameterNumeric": {"type": "object", "properties": {"row_separator": {"type": "string"}, "operator": {"type": "string"}, "numeric_value": {"type": "number"}}}, "Array_tabular_expression_item": {"type": "array", "minItems": 0, "items": {"type": "object", "oneOf": [{"$ref": {"$ref": "#/definitions/VerbSelect"}}, {"$ref": {"$ref": "#/definitions/ParameterDataset"}}, {"$ref": {"$ref": "#/definitions/ParameterSet"}}]}, "uniqueItems": true}, "VerbInsert": {"type": "object", "properties": {"column_identifiers": {"$ref": "#/definitions/Array_ParameterIdentifier"}, "row_separator": {"type": "string"}, "data": {"$ref": "#/definitions/tabular_expression_item"}, "destination_identifier": {"$ref": "#/definitions/ParameterIdentifier"}}}, "ParameterField": {"type": "object", "properties": {"row_separator": {"type": "string"}, "expression": {"$ref": "#/definitions/Array_expression_item"}, "alias": {"type": "string"}}}, "Array_ParameterConstraint": {"type": "array", "minItems": 0, "items": {"$ref": "#/definitions/ParameterConstraint"}, "uniqueItems": true}, "ParameterConditions": {"type": "object", "properties": {}}, "ParameterOrderByItem": {"type": "object", "properties": {"operator": {"type": "string"}, "row_separator": {"type": "string"}, "expressionitems": {"$ref": "#/definitions/Array_expression_item"}, "direction": {"type": "string"}}}, "VerbCreateIndex": {"type": "object", "properties": {"name": {"type": "string"}, "tablename": {"type": "string"}, "columnnames": {"$ref": "#/definitions/Array_string"}, "row_separator": {"type": "string"}, "index_type": {"$ref": "#/definitions/index_types"}}}, "ParameterConstraint": {"type": "object", "properties": {"name": {"type": "string"}, "constraint_type": {"$ref": "#/definitions/constraint_types"}, "checkconditions": {"$ref": "#/definitions/Array_ParameterCondition"}, "row_separator": {"type": "string"}, "references": {"$ref": "#/definitions/Array_ParameterIdentifier"}}}, "ParameterDataset": {"type": "object", "properties": {"resource_uuid": {"type": "string"}, "data_source": {"$ref": "#/definitions/data_source_types"}, "operator": {"type": "string"}, "row_separator": {"type": "string"}}}, "index_types": {"type": "string", "enum": ["UNIQUE", "CLUSTERED", "NONCLUSTERED"]}, "Array_ParameterCondition": {"type": "array", "minItems": 0, "items": {"$ref": "#/definitions/ParameterCondition"}, "uniqueItems": true}, "ParameterSource": {"type": "object", "properties": {"join_type": {"$ref": "#/definitions/join_type"}, "alias": {"type": "string"}, "resource_uuid": {"type": "string"}, "conditions": {"$ref": "#/definitions/Array_ParameterCondition"}, "row_separator": {"type": "string"}, "expression": {"$ref": "#/definitions/Array_expression_item"}}}, "data_source": {"type": "string", "enum": ["FlatfileDataset", "XpathDataset", "MatrixDataset"]}, "Array_Statement": {"type": "array", "minItems": 0, "items": {"$ref": "#/definitions/statement"}, "uniqueItems": true}, "VerbDropTable": {"type": "object", "properties": {"name": {"type": "string"}, "row_separator": {"type": "string"}}}, "Array_expression_item": {"type": "array", "minItems": 0, "items": {"type": "object", "oneOf": [{"$ref": {"$ref": "#/definitions/VerbSelect"}}, {"$ref": {"$ref": "#/definitions/ParameterExpression"}}, {"$ref": {"$ref": "#/definitions/ParameterString"}}, {"$ref": {"$ref": "#/definitions/ParameterNumeric"}}, {"$ref": {"$ref": "#/definitions/ParameterIdentifier"}}, {"$ref": {"$ref": "#/definitions/ParameterCast"}}, {"$ref": {"$ref": "#/definitions/ParameterFunction"}}, {"$ref": {"$ref": "#/definitions/ParameterIn"}}, {"$ref": {"$ref": "#/definitions/ParameterDataset"}}, {"$ref": {"$ref": "#/definitions/ParameterCase"}}, {"$ref": {"$ref": "#/definitions/ParameterSet"}}]}, "uniqueItems": true}, "Array_ParameterWhen": {"type": "array", "minItems": 0, "items": {"$ref": "#/definitions/ParameterWhen"}, "uniqueItems": true}}, "required": ["statement"]}